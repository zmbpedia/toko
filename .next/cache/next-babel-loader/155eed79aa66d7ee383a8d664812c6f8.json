{"ast":null,"code":"import React from \"react\";\nvar __jsx = React.createElement;\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport Layout from \"../../../components/layout\";\nimport ReactPaginate from \"react-paginate\";\nimport fetch from \"isomorphic-unfetch\";\nimport { NextSeo } from 'next-seo';\nimport Link from \"next/link\";\nimport { default as minifyCssString } from \"minify-css-string\";\n\nfunction truncate(str) {\n  return str.length > 10 ? str.substring(0, 100) + \"...\" : str;\n}\n\nexport default class Category extends React.Component {\n  constructor() {\n    super();\n\n    _defineProperty(this, \"receivedData\", e => {\n      window.scrollTo(0, 0);\n      var myArray = [];\n\n      for (var i = 0; i < this.props.show.data.length; i++) {\n        var value = this.props.show.data[i];\n        var values = this.props.show.data[0];\n        var num = value[\"id\"];\n        var namaproduk = value[\"namaproduk\"];\n        var harga = value[\"harga\"];\n        var gambar = value[\"gambar\"];\n        var sh = values[\"gambar\"];\n        var on = value[\"stok\"];\n        var kast = value[\"kategori\"];\n        var stok;\n        var ulr = window.location.href;\n        var one = ulr.split(\"/\")[4];\n        var two = ulr.split(\"/\")[5];\n        myArray.push({\n          id: num,\n          nama: namaproduk,\n          gambar: gambar,\n          harga: harga,\n          stok: on,\n          kats: kast\n        });\n      }\n\n      const slice = myArray.slice(e, e + this.state.perPage);\n      const postData = slice.map(a => __jsx(\"div\", {\n        className: \"col-12 col-sm-6 col-lg-4 featureCol mb-7\"\n      }, __jsx(\"div\", {\n        className: \"border\"\n      }, __jsx(\"div\", {\n        className: \"imgHolder position-relative w-100 overflow-hidden\"\n      }, __jsx(\"img\", {\n        src: a.gambar,\n        style: {\n          height: \"300px\",\n          objectFit: \"cover\",\n          width: \"100%\"\n        },\n        id: \"wax-img\",\n        alt: a.namaproduk,\n        className: \"img-fluid\"\n      })), __jsx(\"div\", {\n        className: \"text-center py-5 px-4\"\n      }, __jsx(\"span\", {\n        className: \"title d-block mb-2\"\n      }, __jsx(Link, {\n        href: \"/produk/[id]/[product]\",\n        as: `/produk/${a.id}/${a.nama.replace(/\\s/g, \"-\")}`\n      }, __jsx(\"a\", null, \" \", truncate(a.nama)))), __jsx(\"span\", {\n        className: \"price d-block fwEbold\"\n      }, a.harga), a.stok ? __jsx(\"span\", {\n        class: \"hotOffer green fwEbold text-uppercase text-white position-absolute d-block ml-8 ups\"\n      }, \"Tersedia\") : __jsx(\"span\", {\n        class: \"hotOffer fwEbold text-uppercase text-white position-absolute d-block ml-8 abs\"\n      }, \"Stok habis\")))));\n      this.setState({\n        pageCount: Math.ceil(myArray.length / this.state.perPage),\n        postData,\n        productdata: myArray\n      });\n    });\n\n    _defineProperty(this, \"handlePageClick\", e => {\n      const selectedPage = e.selected;\n      const offset = selectedPage * this.state.perPage;\n      this.setState({\n        currentPage: selectedPage,\n        offset: offset\n      });\n      this.receivedData(offset);\n    });\n\n    this.state = {\n      imageIndex: 0,\n      data: [],\n      offset: 0,\n      perPage: 6,\n      currentPage: 0,\n      namekat: \"\",\n      ada: \"\"\n    };\n    this.handlePageClick = this.handlePageClick;\n  }\n\n  static async getInitialProps({\n    query\n  }) {\n    const {\n      id,\n      category\n    } = await query;\n    const res = await fetch(\"https://zmbpediabogor.store/api/kategoryproduct/\" + id + \"/\" + category);\n    const show = await res.json();\n    let gambarnya = '';\n    let linknya = '';\n    let titlehead = 'Belum ada produk di kategori ini';\n    let des = '';\n\n    if (show.data.length) {\n      titlehead = 'zmbpediabogor | ' + (await show.namatitle) + ' - kategori produk';\n      des = 'Koleksi Tanaman terbaik kami dari kategori ' + (await show.namatitle);\n      gambarnya = await show.data[0].oggambar;\n      linknya = await show.data[0].cronical;\n    }\n\n    return {\n      show,\n      category,\n      id,\n      gambarnya,\n      linknya,\n      des,\n      titlehead\n    };\n  }\n\n  componentDidMount() {\n    window.scrollTo(0, 0);\n    var myArray = [];\n\n    for (var i = 0; i < this.props.show.data.length; i++) {\n      var value = this.props.show.data[i];\n      var values = this.props.show.data[0];\n      var num = value[\"id\"];\n      var namaproduk = value[\"namaproduk\"];\n      var harga = value[\"harga\"];\n      var gambar = value[\"gambar\"];\n      var sh = values[\"gambar\"];\n      var on = value[\"stok\"];\n      var kast = value[\"kategori\"];\n      var stok;\n      var ulr = window.location.href;\n      var one = ulr.split(\"/\")[4];\n      var two = ulr.split(\"/\")[5];\n      this.setState({\n        namekat: this.props.category,\n        ada: \"yes\"\n      });\n      myArray.push({\n        id: num,\n        nama: namaproduk,\n        gambar: gambar,\n        harga: harga,\n        stok: on,\n        kats: kast\n      });\n    }\n\n    if (myArray.length) {\n      const slice = myArray.slice(this.state.offset, this.state.offset + this.state.perPage);\n      const postData = slice.map(a => __jsx(\"div\", {\n        className: \"col-12 col-sm-6 col-lg-4 featureCol mb-7\"\n      }, __jsx(\"div\", {\n        className: \"border\"\n      }, __jsx(\"div\", {\n        className: \"imgHolder position-relative w-100 overflow-hidden\"\n      }, __jsx(\"img\", {\n        src: a.gambar,\n        style: {\n          height: \"300px\",\n          objectFit: \"cover\",\n          width: \"100%\"\n        },\n        id: \"wax-img\",\n        alt: a.namaproduk,\n        className: \"img-fluid\"\n      })), __jsx(\"div\", {\n        className: \"text-center py-5 px-4\"\n      }, __jsx(\"span\", {\n        className: \"title d-block mb-2\"\n      }, __jsx(Link, {\n        href: \"/produk/[id]/[product]\",\n        as: `/produk/${a.id}/${a.nama.replace(/\\s/g, \"-\")}`\n      }, __jsx(\"a\", null, \" \", truncate(a.nama)))), __jsx(\"span\", {\n        className: \"price d-block fwEbold\"\n      }, a.harga), a.stok ? __jsx(\"span\", {\n        class: \"hotOffer green fwEbold text-uppercase text-white position-absolute d-block ml-8 ups\"\n      }, \"Tersedia\") : __jsx(\"span\", {\n        class: \"hotOffer fwEbold text-uppercase text-white position-absolute d-block ml-8 abs\"\n      }, \"Stok habis\")))));\n      this.setState({\n        pageCount: Math.ceil(myArray.length / this.state.perPage),\n        postData,\n        productdata: myArray\n      });\n    } else {\n      this.setState({\n        ada: \"no\"\n      });\n    }\n  }\n\n  render() {\n    const cssString = `\n    .border{  border: 1px solid #dee2e6!important}\n          .overl{\n            width: 100%;\n    height: 100%;\n    position: absolute;\n    background: rgba(255,255,255, .5);\n          }\n.main-content-wrapper {\n  margin-top: 100px;\n  margin-bottom: 100px;\n}.productTextHolder .price {\n    font-size: 15px;\n    margin-top:20px;\n    }\n          .featureCol .price {\n    font-size: 13px;\n    line-height: 18px;\n    color: #16941a;\n}\n.featureCol .hotOffer {\n    background: #5ba515;\n    top: 30px;\n    left: 0;\n    margin-left: 0 !important;\n}\n.featureCol .hotOffer.ups {\n      top: 23px !important;\n}\n.featureCol .hotOffer.abs {\n  background:#f9861f !important;\n}\n.img-eror{\n              font-size: 130px;\n    text-align: center;\n    width: 100%;\n}`;\n    const {\n      currentPage,\n      namekat,\n      ada\n    } = this.state;\n    return __jsx(Layout, null, __jsx(\"style\", {\n      dangerouslySetInnerHTML: {\n        __html: minifyCssString(cssString)\n      }\n    }), __jsx(NextSeo, {\n      title: this.props.titlehead,\n      description: this.props.des,\n      canonical: this.props.linknya,\n      openGraph: {\n        url: this.props.linknya,\n        title: this.props.titlehead,\n        description: this.props.des,\n        images: [{\n          url: this.props.gambarnya,\n          width: 600,\n          height: 315,\n          alt: this.props.category\n        }],\n        site_name: 'zmbpediabogor'\n      }\n    }), __jsx(\"section\", {\n      className: \"introBannerHolder d-flex w-100 bgCover\",\n      style: {\n        background: `url(${this.props.gambarnya})`,\n        backgroundSize: `cover`,\n        backgroundPosition: `center`\n      }\n    }, __jsx(\"div\", {\n      className: \"overl\",\n      style: {\n        background: 'rgba(255,255,255, .8)'\n      }\n    }), __jsx(\"div\", {\n      class: \"container\"\n    }, __jsx(\"div\", {\n      class: \"row\"\n    }, __jsx(\"div\", {\n      class: \"col-12 pt-lg-23 pt-md-15 pt-sm-10 pt-6 text-center\"\n    }, __jsx(\"h1\", {\n      class: \"headingIV fwEbold playfair mb-4\"\n    }, \" \", this.state.namekat.replace(/\\-/g, \" \")), __jsx(\"ul\", {\n      class: \"list-unstyled breadCrumbs d-flex justify-content-center\"\n    }, __jsx(\"li\", {\n      class: \"mr-2\"\n    }, __jsx(Link, {\n      href: \"/\",\n      to: \"/\"\n    }, __jsx(\"a\", null, \"Beranda\"))), __jsx(\"li\", {\n      class: \"mr-2\"\n    }, \"/\"), __jsx(\"li\", {\n      class: \"active\"\n    }, \"Kategori\")))))), __jsx(\"div\", {\n      className: \"main-content-wrapper\"\n    }, __jsx(\"div\", {\n      className: \"shop-page-wrapper ptb--80\"\n    }, __jsx(\"div\", {\n      className: \"container\"\n    }, __jsx(\"div\", {\n      className: \"row\"\n    }, __jsx(\"div\", {\n      className: \"col-12\"\n    }, __jsx(\"div\", {\n      className: \"shop-products\"\n    }, ada === \"no\" ? __jsx(\"div\", {\n      id: \"non\",\n      className: \"row\"\n    }, __jsx(\"div\", {\n      className: \"img-eror icon icon-plant\"\n    }), __jsx(\"h1\", {\n      style: {\n        textAlign: \"center\",\n        paddingTop: \"100px\",\n        width: \"100%\",\n        paddingBottom: \"100px\"\n      }\n    }, \"Belum ada produk di kategori ini\")) : __jsx(\"div\", null, __jsx(\"div\", {\n      id: \"prod\",\n      className: \"row\"\n    }, this.state.postData), __jsx(ReactPaginate, {\n      previousLabel: \"prev\",\n      nextLabel: \"next\",\n      breakLabel: \"...\",\n      breakClassName: \"break-me\",\n      pageCount: this.state.pageCount,\n      marginPagesDisplayed: 2,\n      pageRangeDisplayed: 5,\n      onPageChange: this.handlePageClick,\n      containerClassName: \"pagination\",\n      subContainerClassName: \"pages pagination\",\n      activeClassName: \"active\"\n    })))))))));\n  }\n\n}","map":null,"metadata":{},"sourceType":"module"}